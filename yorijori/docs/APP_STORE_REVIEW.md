# 앱 스토어 심사 시 서버 준비 (요리조리)

## 2026-02-03 심사 거절 원인

- **거절 사유:** Guideline 2.1 - App Completeness  
  "분석하기" 버튼 탭 시 에러 메시지 표시
- **원인:** 심사 시점에 백엔드 서버(PC + ngrok)에 연결되지 않아 API 요청 실패 → 앱이 에러 SnackBar 표시

## 재제출 전 체크리스트 (로컬 서버 사용 시)

1. **PC 전원**
   - 심사 기간(제출일 ~ 심사 완료까지, 보통 1~3일) 내내 **PC를 켜 두기**
   - 노트북이면 **전원 어댑터 연결** 유지

2. **절전 방지**
   - **시스템 설정 → 잠금 화면(Lock Screen)**  
     - "디스플레이가 꺼져 있을 때 자동으로 잠자기 방지" → **전원 연결 시 켜기**
   - 화면만 꺼져도 되지만, **컴퓨터 절전(슬립)** 은 반드시 끄기

3. **백엔드 실행**
   - 터미널에서 `backend/` 폴더로 이동 후 서버 실행 (예: `uvicorn main:app --host 0.0.0.0 --port 8000`)
   - 심사 기간 동안 **프로세스가 종료되지 않도록** 유지

4. **ngrok 실행**
   - `ngrok http 8000` 실행 후 나온 URL이 `constants.dart`의 `devApiBaseUrl`과 **동일한지** 확인
   - ngrok 재시작 시 URL이 바뀌면 앱이 서버를 찾지 못함 → **재시작하지 않기** 또는 앱에 박아둔 URL과 맞추기

5. **네트워크**
   - 같은 Wi‑Fi/네트워크가 끊기지 않도록 (공유기 재부팅 자제 등)

## 권장: 장기적 해결

- 백엔드를 **클라우드**(AWS, GCP, Railway, Render 등)에 배포
- `constants.dart`의 `apiBaseUrl`을 프로덕션 URL(`prodApiBaseUrl`)로 변경 후 스토어 제출
- 그러면 심사관이 언제 테스트해도 서버가 켜 있어서 "분석하기"가 정상 동작함
